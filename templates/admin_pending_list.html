<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Applicants</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <div class="container py-4">
    <div class="d-flex justify-content-between align-items-center">
      <h3>{{ 'All Applicants' if show_all else 'Pending Applicants' }}</h3>
      <div>
        <a class="btn btn-secondary" href="{{ url_for('admin_dashboard') }}">Dashboard</a>
        <a class="btn btn-sm btn-outline-danger" href="{{ url_for('admin_logout') }}">Logout</a>
      </div>
    </div>
    <table class="table table-striped mt-3">
      <thead><tr><th>ID</th><th>Name</th><th>Email</th><th>Phone</th><th>Course</th><th>Status</th><th>Actions</th></tr></thead>
      <tbody>
      {% for a in applicants %}
        <tr>
          <td>{{ a.id }}</td>
          <td>{{ a.full_name }}</td>
          <td>{{ a.email }}</td>
          <td>{{ a.phone or '-' }}</td>
          <td>{{ a.course or '-' }}</td>
          <td>{{ a.status }}</td>
          <td>
            {% if a.status == 'pending' %}
              <form style="display:inline" method="post" action="{{ url_for('approve_applicant', applicant_id=a.id) }}">
                <input name="admin_note" placeholder="note (optional)" class="form-control form-control-sm mb-1">
                <button class="btn btn-sm btn-success">Approve</button>
              </form>
              <form style="display:inline" method="post" action="{{ url_for('reject_applicant', applicant_id=a.id) }}">
                <input name="admin_note" placeholder="note (optional)" class="form-control form-control-sm mb-1">
                <button class="btn btn-sm btn-danger">Reject</button>
              </form>
            {% else %}
              <small>{{ a.admin_note or '' }}</small>
            {% endif %}
          </td>
        </tr>
      {% else %}
        <tr><td colspan="7" class="text-center">No applicants found.</td></tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</body>
</html>
